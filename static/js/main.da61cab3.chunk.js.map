{"version":3,"sources":["utils/store.jsx","utils/fetchUsers.js","component/router.jsx","img/404.jpg","component/Error.jsx","index.js","component/Spinner.jsx","utils/history.js"],"names":["store","observable","open","setModalOpen","action","setModalClose","toggleModal","showForm","toggleForm","isSignedIn","toggleSgn","nb","inc","welcome","setMsg","users","addUser","data","push","addUsers","emails","Array","from","email","newdata","filter","user","includes","length","getUserEmail","idx","getUserByEmail","result","forEach","current","setCurrent","rmCurrent","u","token","setToken","fetchUsers","a","requests","map","page","fetch","Promise","all","response","r","json","flatMap","spin","Spinner","LazyLayout","lazy","LazyHome","LazyAbout","LazySignInForm","LazyNewUsersForm","LazyUser","LazyContacts","routes","path","next","component","fallback","children","mode","info","context","then","res","params","Error","src","img404","alt","style","height","width","loading","configure","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","anchor","document","getElementById","router","UniversalRouter","renderRoute","location","undefined","pathname","resolve","resolveComponent","ReactDOM","render","console","log","history","listen","memo","className","viewBox","xmlns","fill","strokeWidth","strokeLinecap","cx","cy","createBrowserHistory"],"mappings":"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","file":"static/js/main.da61cab3.chunk.js","sourcesContent":["import { action, observable } from \"mobx\";\n\nconst store = observable({\n  // modal version\n  open: false,\n  setModalOpen: action(function setOpen() {\n    store.open = true;\n  }),\n  setModalClose: action(function setLodalClose() {\n    store.open = false;\n  }),\n  toggleModal: action(function toggleModal() {\n    return (store.open = !store.open);\n  }),\n  //\n  showForm: false,\n  toggleForm: action(function toggleForm() {\n    return (store.showForm = !store.showForm);\n  }),\n  //\n  isSignedIn: false,\n  toggleSgn: action(function toggleSgn() {\n    return (store.isSignedIn = !store.isSignedIn);\n  }),\n  get setSignedIn() {\n    return store.isSignedIn ? \"Sign out\" : \"Sign in\";\n  },\n  //\n  nb: 0,\n  inc: action(function inc() {\n    return store.nb++;\n  }),\n  //\n  welcome: \"Please sign in\",\n  get setWelcome() {\n    return store.isSignedIn ? \"Welcome back\" : \"Please sign in\";\n  },\n  setMsg: action(function setMsg() {\n    return (store.welcome = store.isSignedIn\n      ? \"Welcome back\"\n      : \"Please sign in\");\n  }),\n  //\n  users: [],\n  addUser: action(function addUser(data) {\n    store.users.push(data);\n  }),\n  addUsers: action((data) => {\n    const emails = Array.from(store.users, ({ email }) => email);\n    const newdata = data.filter((user) => !emails.includes(user.email));\n    return (store.users = [...store.users, ...newdata]); // concate 2 arrays -> 2 spread\n  }),\n  get nbUsers() {\n    return store.users.length;\n  },\n  getUserEmail: function (idx) {\n    if (store.users.length > 0) return store.users[idx].email;\n  },\n  getUserByEmail: function (email) {\n    let result;\n    store.users.forEach((user) => {\n      if (user.email === email) result = user;\n    });\n    return result;\n  },\n  //\n  current: {},\n  setCurrent: action((data) => {\n    store.current = data;\n  }),\n  rmCurrent: action(function rmUser(user) {\n    store.users = store.users.filter((u) => u.email !== user.email);\n    store.current = {};\n  }),\n  //\n  token: \"\",\n  setToken: action(function ({ token }) {\n    store.token = token;\n  }),\n});\n\nexport default store;\n","export default async function fetchUsers() {\n  // const urlApi1 = \"https://jsonplaceholder.typicode.com/users\";\n  // const resp = await fetch(urlApi1);\n  // return await resp.json();\n\n  const urlApi2 = \"https://reqres.in/api/users\";\n  const requests = [1, 2].map((page) => fetch(`${urlApi2}?page=${page}`));\n  const response = await Promise.all(requests);\n  const users = await Promise.all(response.map((r) => r.json()));\n  return users.flatMap((u) => u.data);\n}\n","import React, { Suspense, lazy } from \"react\";\n// import UniversalRouter from \"universal-router\";\nimport { action } from \"mobx\";\n\n// import store from \"../utils/store\";\n\nimport fetchUsers from \"../utils/fetchUsers\";\n\nimport Spinner from \"./Spinner\";\nconst spin = () => <Spinner />;\n\nconst LazyLayout = lazy(() => import(\"./Layout\"));\nconst LazyHome = lazy(() => import(\"./Home\"));\nconst LazyAbout = lazy(() => import(\"./About\"));\nconst LazySignInForm = lazy(() => import(\"./SignInForm\"));\nconst LazyNewUsersForm = lazy(() => import(\"./NewUsersForm\"));\nconst LazyUser = lazy(() => import(\"./User\"));\nconst LazyContacts = lazy(() => import(\"./Contacts\"));\n\n/* \nin \"index.js\", the Mobx store object is declared and passed to the \n\"new UniversalRouter(routes, {context})\"  via the object \"context={store:store}\"\nHere is the skeleton of \"routes\" waiting for the context to be declared (or not)\n*/\n\nexport const routes = [\n  {\n    path: \"\",\n    async action({ store, next }) {\n      const component = await next();\n      return (\n        component && (\n          <Suspense fallback={<Spinner />}>\n            <LazyLayout store={store}>{component}</LazyLayout>\n          </Suspense>\n        )\n      );\n    },\n    children: [\n      {\n        path: \"/\",\n        action: async ({ store }) => {\n          return (\n            <Suspense fallback={spin()}>\n              <LazyHome store={store} />;\n            </Suspense>\n          );\n        },\n      },\n      {\n        path: \"/about\",\n        async action({ store, mode }) {\n          // note: \"info\" is just a trial to see how data is passed via the context object\n          return (\n            <Suspense fallback={spin()}>\n              <LazyAbout store={store} info={mode} />;\n            </Suspense>\n          );\n        },\n      },\n      {\n        path: \"/signinform\",\n        async action({ store }) {\n          return (\n            <Suspense fallback={spin()}>\n              <LazySignInForm store={store} />;\n            </Suspense>\n          );\n        },\n      },\n      {\n        path: \"/addusers\",\n        async action(context) {\n          return (\n            <Suspense fallback={spin()}>\n              <LazyNewUsersForm store={context.store} />;\n            </Suspense>\n          );\n        },\n      },\n      {\n        path: \"/contacts\",\n        children: [\n          {\n            path: \"\",\n            // the \"action\" below is from Universal Router\n            async action({ store }) {\n              fetchUsers() // the \"action\" below is from Mobx\n                .then(action((res) => store.addUsers(res)));\n              return (\n                <Suspense fallback={spin()}>\n                  <LazyContacts store={store} />;\n                </Suspense>\n              );\n            },\n          },\n          {\n            path: \"/:email\",\n            async action(context) {\n              // or ({ store }, { email }) instead of context\n              // const email = context.params.email; // cf UR docs\n              return (\n                <Suspense fallback={spin()}>\n                  <LazyUser\n                    email={context.params.email}\n                    store={context.store}\n                  />\n                  ;\n                </Suspense>\n              );\n            },\n          },\n        ],\n      },\n    ],\n  },\n];\n\n// const context = {\n//   mode: \"admin\", <- just a trial\n//   store,\n// };\n\n// export default new UniversalRouter(routes, { context });\n","export default __webpack_public_path__ + \"static/media/404.8b1d91e2.jpg\";","import React, { lazy, Suspense } from \"react\";\n\nimport img404 from \"../img/404.jpg\";\nimport Spinner from \"./Spinner\";\nconst LazyLayout = lazy(() => import(\"./Layout\"));\n\nexport default function Error() {\n  return (\n    <Suspense fallback={<Spinner />}>\n      <LazyLayout>\n        <img\n          src={img404}\n          alt=\"error 404\"\n          style={{ height: \"100vh\", width: \"100vw\" }}\n          loading=\"lazy\"\n        />\n      </LazyLayout>\n    </Suspense>\n  );\n}\n","import ReactDOM from \"react-dom\";\n\nimport UniversalRouter from \"universal-router\";\n\nimport history from \"./utils/history\";\nimport { routes } from \"./component/router\";\n\nimport store from \"./utils/store\";\n\n// or cdn <=> window.UniversalRouter: to test\n// import initFacebookSdk from \"./utils/initFacebookSdk\";\n\nimport { configure } from \"mobx\";\n\nimport Error from \"./component/Error\";\n\n// Mobx debug\nconfigure({\n  enforceActions: \"always\",\n  computedRequiresReaction: true,\n  reactionRequiresObservable: true,\n  observableRequiresReaction: true,\n  disableErrorBoundaries: true,\n});\n\n//\nconst anchor = document.getElementById(\"root\");\n\nconst context = {\n  mode: \"admin\",\n  store,\n};\n\nconst router = new UniversalRouter(routes, { context });\n\nasync function renderRoute(location) {\n  try {\n    if (location === undefined) {\n      return (location.pathname = \"/\");\n    }\n    const resolveComponent = await router.resolve({\n      pathname: location.pathname,\n    });\n    return ReactDOM.render(resolveComponent, anchor);\n  } catch (err) {\n    console.log(\"Nothing there: \", location);\n    return ReactDOM.render(<Error />, anchor);\n  }\n}\n\n// .then(startApp); <- to learn\n\nfunction startApp() {\n  history.listen(({ location }) => renderRoute(location));\n  renderRoute(history.location); // currentLocation = history.location\n}\n\n// initFacebookSdk();\nstartApp();\n\n/* Note: check history.listen((res) => console.log(res)); */\n","import React, { memo } from \"react\";\nimport \"../spinner.css\";\n\nconst Spinner = memo(() => {\n  return (\n    <svg\n      className=\"spinner\"\n      width=\"65px\"\n      height=\"65px\"\n      viewBox=\"0 0 66 66\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <circle\n        className=\"path\"\n        fill=\"none\"\n        strokeWidth=\"6\"\n        strokeLinecap=\"round\"\n        cx=\"33\"\n        cy=\"33\"\n        r=\"30\"\n      ></circle>\n    </svg>\n  );\n});\nexport default Spinner;\n","import { createBrowserHistory } from \"history\";\nconst history = createBrowserHistory();\nexport default history;\n"],"sourceRoot":""}