{"version":3,"sources":["component/FBButton.jsx","component/FBConnect.jsx"],"names":["FBButton","observer","useState","user","setUser","statusCallback","response","a","fbToken","authResponse","accessToken","status","console","log","window","FB","api","fields","action","name","email","store","setCurrent","pwd","signed","fb","toggleSgn","FBLogin","getLoginStatus","token","accesToken","login","scope","onClick","fullWidth","disabled","current","variant","style","backgroundColor","FBConnect","React","useEffect","fbAsyncInit","init","appId","cookie","xfbml","version","AppEvents","logPageView","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document"],"mappings":"2OA8FeA,EArFEC,aAAS,WAAO,IAAD,EACNC,mBAAS,IADH,mBACvBC,EADuB,KACjBC,EADiB,KAGxBC,EAAc,uCAAG,WAAOC,GAAP,eAAAC,EAAA,yDACfC,EAAUF,EAASG,aAAaC,YACd,cAApBJ,EAASK,OAFQ,uBAGnBC,QAAQC,IAAI,iBAHO,6BAMG,cAApBP,EAASK,OANQ,yCAOZG,OAAOC,GAAGC,IACf,MACA,CAAEC,OAAQ,eACVC,aAAO,SAAUZ,GACfF,EAAQ,CAAEe,KAAMb,EAASa,KAAMC,MAAOd,EAASc,QAC/CC,IAAMC,WAAW,CACfH,KAAMb,EAASa,KACfC,MAAOd,EAASc,MAChBG,IAAKf,EACLgB,QAAQ,EACRC,IAAI,IAENJ,IAAMK,YACNd,QAAQC,IAAIV,QApBG,2CAAH,sDA0BdwB,EAAUT,YAAM,sBAAC,sBAAAX,EAAA,sDACrBO,OAAOC,GAAGa,eACRV,YAAM,uCAAC,WAAOZ,GAAP,iBAAAC,EAAA,yDACCsB,EADD,OACSvB,QADT,IACSA,GADT,UACSA,EAAUG,oBADnB,aACS,EAAwBqB,WACjCxB,EAASG,aAFT,gBAGHK,OAAOC,GAAGgB,OACR,SAACzB,GACCD,EAAeC,KAEjB,CAAE0B,MAAO,UAPR,+CAWIlB,OAAOC,GAAGC,IACf,MACA,CAAEC,OAAQ,eACVC,aAAO,SAAUZ,GACfF,EAAQ,CAAEe,KAAMb,EAASa,KAAMC,MAAOd,EAASc,QAC/CC,IAAMC,WAAW,CACfH,KAAMb,EAASa,KACfC,MAAOd,EAASc,MAChBG,IAAKM,EACLL,QAAQ,EACRC,IAAI,IAENJ,IAAMK,iBAvBP,2CAAD,wDAFa,4CAqCvB,OACE,mCACE,mBACEO,QAASN,EACTO,WAAS,EACTC,SAAUd,IAAMe,QAAQZ,OACxBa,QAAQ,WACRC,MAAO,CACLC,gBAAiBlB,IAAMe,QAAQZ,OAAS,UAAY,WANxD,SASGH,IAAMe,QAAQZ,OAAd,kBACcH,IAAMe,QAAQjB,MACzB,6BCpFG,SAASqB,IAwBtB,OAvBAC,IAAMC,WAAU,WACd5B,OAAO6B,YAAc,WACnB7B,OAAOC,GAAG6B,KAAK,CACbC,MAAO,kBACPC,QAAQ,EACRC,OAAO,EACPC,QAAS,SAGXlC,OAAOC,GAAGkC,UAAUC,eAGtB,SAAEC,EAAGC,EAAGC,GACN,IAAIC,EACFC,EAAMJ,EAAEK,qBAAqBJ,GAAG,GAC9BD,EAAEM,eAAeJ,MACrBC,EAAKH,EAAEO,cAAcN,IAClBC,GAAKA,EACRC,EAAGK,IAAM,4CACTJ,EAAIK,WAAWC,aAAaP,EAAIC,IAPlC,CAQGO,SAAU,SAAU,oBACtB,IAEI,cAAC,EAAD","file":"static/js/5.938e5552.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n// import FBIcon from \"../utils/FBIcon\";\n// import history from \"../utils/history\";\n\nimport { Button } from \"@material-ui/core\";\nimport { action } from \"mobx\";\nimport { observer } from \"mobx-react-lite\";\nimport store from \"../utils/store\";\n\nconst FBButton = observer(() => {\n  const [user, setUser] = useState(\"\");\n\n  const statusCallback = async (response) => {\n    const fbToken = response.authResponse.accessToken;\n    if (response.status !== \"connected\") {\n      console.log(\"not logged in\");\n      return;\n    }\n    if (response.status === \"connected\") {\n      return window.FB.api(\n        \"/me\",\n        { fields: \"name, email\" },\n        action(function (response) {\n          setUser({ name: response.name, email: response.email });\n          store.setCurrent({\n            name: response.name,\n            email: response.email,\n            pwd: fbToken,\n            signed: true,\n            fb: true,\n          });\n          store.toggleSgn();\n          console.log(user);\n        })\n      );\n    }\n  };\n\n  const FBLogin = action(async () => {\n    window.FB.getLoginStatus(\n      action(async (response) => {\n        const token = response?.authResponse?.accesToken;\n        if (!response.authResponse) {\n          window.FB.login(\n            (response) => {\n              statusCallback(response);\n            },\n            { scope: \"email\" }\n          );\n          // history.push({ pathname: \"/\" });\n        } else {\n          return window.FB.api(\n            \"/me\",\n            { fields: \"name, email\" },\n            action(function (response) {\n              setUser({ name: response.name, email: response.email });\n              store.setCurrent({\n                name: response.name,\n                email: response.email,\n                pwd: token,\n                signed: true,\n                fb: true,\n              });\n              store.toggleSgn();\n            })\n          );\n          // setUser(\"\");\n          // store.setCurrent({});\n          // store.isSignedIn = false;\n          // return window.FB.logout();\n        }\n      })\n    );\n  });\n\n  return (\n    <>\n      <Button\n        onClick={FBLogin}\n        fullWidth\n        disabled={store.current.signed}\n        variant=\"outlined\"\n        style={{\n          backgroundColor: store.current.signed ? \"#997b3b\" : \"#3b5999\",\n        }}\n      >\n        {store.current.signed\n          ? `Welcome ${store.current.name}`\n          : \"Login with Facebook\"}\n      </Button>\n    </>\n  );\n});\n\nexport default FBButton;\n","import React from \"react\";\n\nimport FBButton from \"./FBButton\";\n\nexport default function FBConnect() {\n  React.useEffect(() => {\n    window.fbAsyncInit = () => {\n      window.FB.init({\n        appId: \"150509900166677\",\n        cookie: true,\n        xfbml: true,\n        version: \"v9.0\",\n      });\n\n      window.FB.AppEvents.logPageView();\n    };\n\n    ((d, s, id) => {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) return;\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, \"script\", \"facebook-jssdk\");\n  }, []);\n\n  return <FBButton />;\n}\n"],"sourceRoot":""}