{"version":3,"sources":["component/FBButton.jsx","component/FBConnect.jsx"],"names":["FBButton","observer","useState","user","setUser","statusCallback","response","a","fbToken","authResponse","accessToken","status","console","log","window","FB","api","fields","action","name","email","store","setCurrent","pwd","toggleSgn","FBLogin","getLoginStatus","login","scope","isSignedIn","logout","onClick","fullWidth","variant","style","backgroundColor","FBConnect","React","useEffect","fbAsyncInit","init","appId","cookie","xfbml","version","AppEvents","logPageView","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document"],"mappings":"2OAoEeA,EA5DEC,aAAS,WAAO,IAAD,EACNC,mBAAS,IADH,mBACvBC,EADuB,KACjBC,EADiB,KAGxBC,EAAc,uCAAG,WAAOC,GAAP,eAAAC,EAAA,yDACfC,EAAUF,EAASG,aAAaC,YACd,cAApBJ,EAASK,OAFQ,uBAGnBC,QAAQC,IAAI,iBAHO,6BAMG,cAApBP,EAASK,OANQ,yCAOZG,OAAOC,GAAGC,IACf,MACA,CAAEC,OAAQ,eACVC,aAAO,SAAUZ,GACfF,EAAQ,CAAEe,KAAMb,EAASa,KAAMC,MAAOd,EAASc,QAC/CC,IAAMC,WAAW,CAAEF,MAAOd,EAASc,MAAOG,IAAKf,IAC/Ca,IAAMG,iBAbS,2CAAH,sDAmBdC,EAAUP,YAAM,sBAAC,sBAAAX,EAAA,sDACrBO,OAAOC,GAAGW,eACRR,YAAM,uCAAC,WAAOZ,GAAP,SAAAC,EAAA,yDACAD,EAASG,aADT,gBAEHK,OAAOC,GAAGY,OACR,SAACrB,GACCD,EAAeC,KAEjB,CAAEsB,MAAO,UANR,6BASHxB,EAAQ,IACRiB,IAAMC,WAAW,IACjBD,IAAMQ,YAAa,EAXhB,kBAYIf,OAAOC,GAAGe,UAZd,2CAAD,wDAFa,4CAoBvB,OACE,mCACE,mBACEC,QAASN,EACTO,WAAS,EACTC,QAAQ,WACRC,MAAO,CACLC,gBAAiBhC,GAAQkB,IAAMQ,WAAa,UAAY,WAL5D,SAQG1B,GAAQkB,IAAMQ,WAAd,kBACc1B,EAAKgB,MAChB,6BC1DG,SAASiB,IAwBtB,OAvBAC,IAAMC,WAAU,WACdxB,OAAOyB,YAAc,WACnBzB,OAAOC,GAAGyB,KAAK,CACbC,MAAO,kBACPC,QAAQ,EACRC,OAAO,EACPC,QAAS,SAGX9B,OAAOC,GAAG8B,UAAUC,eAGtB,SAAEC,EAAGC,EAAGC,GACN,IAAIC,EACFC,EAAMJ,EAAEK,qBAAqBJ,GAAG,GAC9BD,EAAEM,eAAeJ,MACrBC,EAAKH,EAAEO,cAAcN,IAClBC,GAAKA,EACRC,EAAGK,IAAM,4CACTJ,EAAIK,WAAWC,aAAaP,EAAIC,IAPlC,CAQGO,SAAU,SAAU,oBACtB,IAEI,cAAC,EAAD","file":"static/js/5.4e4b71d8.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n// import FBIcon from \"../utils/FBIcon\";\n\nimport { Button } from \"@material-ui/core\";\nimport { action } from \"mobx\";\nimport { observer } from \"mobx-react-lite\";\nimport store from \"../utils/store\";\n\nconst FBButton = observer(() => {\n  const [user, setUser] = useState(\"\");\n\n  const statusCallback = async (response) => {\n    const fbToken = response.authResponse.accessToken;\n    if (response.status !== \"connected\") {\n      console.log(\"not logged in\");\n      return;\n    }\n    if (response.status === \"connected\") {\n      return window.FB.api(\n        \"/me\",\n        { fields: \"name, email\" },\n        action(function (response) {\n          setUser({ name: response.name, email: response.email });\n          store.setCurrent({ email: response.email, pwd: fbToken });\n          store.toggleSgn();\n        })\n      );\n    }\n  };\n\n  const FBLogin = action(async () => {\n    window.FB.getLoginStatus(\n      action(async (response) => {\n        if (!response.authResponse) {\n          window.FB.login(\n            (response) => {\n              statusCallback(response);\n            },\n            { scope: \"email\" }\n          );\n        } else {\n          setUser(\"\");\n          store.setCurrent({});\n          store.isSignedIn = false;\n          return window.FB.logout();\n        }\n      })\n    );\n  });\n\n  return (\n    <>\n      <Button\n        onClick={FBLogin}\n        fullWidth\n        variant=\"outlined\"\n        style={{\n          backgroundColor: user && store.isSignedIn ? \"#997b3b\" : \"#3b5999\",\n        }}\n      >\n        {user && store.isSignedIn\n          ? `Welcome ${user.name}`\n          : \"Login with Facebook\"}\n      </Button>\n    </>\n  );\n});\n\nexport default FBButton;\n","import React from \"react\";\n\nimport FBButton from \"./FBButton\";\n\nexport default function FBConnect() {\n  React.useEffect(() => {\n    window.fbAsyncInit = () => {\n      window.FB.init({\n        appId: \"150509900166677\",\n        cookie: true,\n        xfbml: true,\n        version: \"v9.0\",\n      });\n\n      window.FB.AppEvents.logPageView();\n    };\n\n    ((d, s, id) => {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) return;\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, \"script\", \"facebook-jssdk\");\n  }, []);\n\n  return <FBButton />;\n}\n"],"sourceRoot":""}